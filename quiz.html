<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accountability Styles Quiz</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        const AccountabilityQuiz = () => {
          const [currentQuestion, setCurrentQuestion] = useState(0);
          const [answers, setAnswers] = useState([]);
          const [showResult, setShowResult] = useState(false);
          const [userName, setUserName] = useState('');
          const [showNameInput, setShowNameInput] = useState(true);
          const [isSubmitting, setIsSubmitting] = useState(false);

          const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwXgnv9EPeFFUa15SAcuUWCEhuG6StKbA_KKU7cL2hjoHAsx6qW_EAsjiDeFbdR8AjVFQ/exec';

          const questions = [
            {
              q: "A project you're leading misses a deadline. Your first response is:",
              options: [
                { text: "Email the team immediately explaining what went wrong and your plan to fix it", type: "champion" },
                { text: "Call a team meeting to discuss what happened and how to move forward together", type: "collaborative" },
                { text: "Explain to your manager all the unexpected obstacles that caused the delay", type: "defensive" },
                { text: "Wait to see if anyone brings it up first", type: "avoider" }
              ]
            },
            {
              q: "A colleague points out an error you made. You:",
              options: [
                { text: "Thank them, apologize, and immediately correct it", type: "champion" },
                { text: "Acknowledge it and ask if they can help you understand what went wrong", type: "collaborative" },
                { text: "Explain the circumstances that led to the mistake", type: "defensive" },
                { text: "Point out that the instructions weren't clear or that others made similar errors", type: "shifter" }
              ]
            },
            {
              q: "Your manager asks why something didn't get done. You:",
              options: [
                { text: "Take full responsibility and outline your recovery plan", type: "champion" },
                { text: "Explain your role and ask for input on preventing this in the future", type: "collaborative" },
                { text: "Explain that you had a lot on your plate that was a higher priority", type: "defensive" },
                { text: "Give a brief response and hope the conversation moves on", type: "avoider" }
              ]
            },
            {
              q: "A client complains about your team's work. You:",
              options: [
                { text: "Acknowledge the issue and bring the team together to address it", type: "collaborative" },
                { text: "Point out which team members handled that specific part", type: "shifter" },
                { text: "Explain the constraints your team was working under", type: "defensive" },
                { text: "Stay quiet and let your manager handle the client communication", type: "avoider" }
              ]
            },
            {
              q: "During a team meeting, someone blames you for a problem you contributed to. You:",
              options: [
                { text: "Acknowledge your part and ask how you can help fix it", type: "champion" },
                { text: "Agree you played a role and want to work with the team on solutions", type: "collaborative" },
                { text: "Point out that others were also involved in the decision", type: "shifter" },
                { text: "Explain the context of why you made that choice", type: "defensive" }
              ]
            },
            {
              q: "You're running late to an important meeting. You:",
              options: [
                { text: "Message immediately with apology, ETA, and offer to catch up after", type: "champion" },
                { text: "Let them know you're running late and ask if they can start without you", type: "collaborative" },
                { text: "Blame traffic or an earlier meeting that ran over", type: "shifter" },
                { text: "Show up late without prior notice and apologize when you arrive", type: "avoider" }
              ]
            },
            {
              q: "A process you designed isn't working well. Multiple people have complained. You:",
              options: [
                { text: "Thank them for feedback, own the flaws, and commit to redesigning it", type: "champion" },
                { text: "Explain your original reasoning and why you thought it would work", type: "defensive" },
                { text: "Suggest that people might just need more time to adjust to it", type: "shifter" },
                { text: "Become quiet in meetings when the topic comes up", type: "avoider" }
              ]
            },
            {
              q: "You discover a mistake in work you submitted last week. Nobody has noticed yet. You:",
              options: [
                { text: "Immediately notify everyone affected and send the correction", type: "champion" },
                { text: "Fix it and inform your team so they're aware", type: "collaborative" },
                { text: "Note that the original requirements were ambiguous", type: "shifter" },
                { text: "Fix it quietly and only mention it if someone asks", type: "avoider" }
              ]
            },
            {
              q: "Your team fails to meet a quarterly goal. In the retrospective, you:",
              options: [
                { text: "Facilitate an honest discussion about what everyone could improve", type: "collaborative" },
                { text: "Focus on external factors that made the goal difficult", type: "defensive" },
                { text: "Mention that other departments didn't provide needed support", type: "shifter" },
                { text: "Stay quiet unless specifically asked for your input", type: "avoider" }
              ]
            },
            {
              q: "Someone asks you directly: 'Is this your fault?' when something goes wrong. You:",
              options: [
                { text: "Say 'Yes, I'm responsible' if you are, and explain how you'll fix it", type: "champion" },
                { text: "Explain all the factors involved before answering", type: "defensive" },
                { text: "Say it's complicated and multiple people contributed", type: "shifter" },
                { text: "Give a vague answer and try to change the subject", type: "avoider" }
              ]
            }
          ];

          const accountabilityTypes = {
            champion: {
              title: "The Ownership Champion",
              description: "You immediately acknowledge mistakes, proactively address issues before being asked, and focus on solutions rather than excuses. You lead by example when it comes to accountability.",
              color: "bg-green-500",
              icon: "üèÜ",
              growth: "While taking ownership is admirable, remember to balance self-accountability with self-compassion. Not everything requires an immediate fix, and sometimes pausing to understand systemic issues can prevent future problems. Consider inviting more collaborative input rather than shouldering everything alone."
            },
            collaborative: {
              title: "The Collaborative Fixer",
              description: "You take responsibility but prefer to work through problems with team support. You value transparency and shared problem-solving, making accountability a team effort.",
              color: "bg-blue-500",
              icon: "ü§ù",
              growth: "Your inclusive approach is valuable, but be mindful of when quick individual action is needed versus when collaboration is appropriate. Sometimes waiting to involve others can delay necessary decisions. Practice being comfortable with solo accountability when the situation calls for it."
            },
            defensive: {
              title: "The Defensive Deflector",
              description: "You initially resist blame and point to external factors or others, but may eventually accept responsibility when pressed. You tend to explain circumstances before acknowledging your role.",
              color: "bg-yellow-500",
              icon: "üõ°Ô∏è",
              growth: "Your attention to context is important, but try leading with ownership before explaining circumstances. Practice saying 'I'm responsible for this' first, then discussing the factors involved. This builds trust faster and doesn't diminish the validity of external challenges you faced."
            },
            avoider: {
              title: "The Silent Avoider",
              description: "You go quiet when issues arise and hope problems resolve themselves. You're reluctant to explicitly admit fault and prefer to let situations pass without direct confrontation.",
              color: "bg-orange-500",
              icon: "üôà",
              growth: "Addressing issues early prevents them from growing larger. Practice speaking up proactively about mistakes, even when it feels uncomfortable. Remember that most people appreciate honesty and early transparency more than they judge the mistake itself. Start with small acknowledgments to build confidence."
            },
            shifter: {
              title: "The Blame Shifter",
              description: "You consistently redirect responsibility to others, circumstances, or systems. You rarely acknowledge your personal role in problems and focus on external attribution.",
              color: "bg-red-500",
              icon: "‚û°Ô∏è",
              growth: "While external factors do matter, focusing solely on them can damage trust and relationships. Try asking yourself 'What was within my control?' in any situation. Even small acknowledgments of your role can significantly improve how others perceive your accountability. This doesn't mean accepting unfair blame, but recognizing your sphere of influence."
            }
          };

          const calculateResult = () => {
            const typeCounts = {
              champion: 0,
              collaborative: 0,
              defensive: 0,
              avoider: 0,
              shifter: 0
            };

            answers.forEach(answer => {
              typeCounts[answer.type]++;
            });

            const maxCount = Math.max(...Object.values(typeCounts));
            const tiedTypes = Object.keys(typeCounts).filter(key => typeCounts[key] === maxCount);
            
            const priorityOrder = ['champion', 'collaborative', 'defensive', 'avoider', 'shifter'];
            
            for (const type of priorityOrder) {
              if (tiedTypes.includes(type)) {
                return type;
              }
            }
            
            return 'champion';
          };

          const handleAnswer = (option) => {
            const newAnswers = [...answers, option];
            setAnswers(newAnswers);

            if (currentQuestion < questions.length - 1) {
              setCurrentQuestion(currentQuestion + 1);
            } else {
              saveResult(newAnswers);
              setShowResult(true);
            }
          };

          const saveResult = async (finalAnswers) => {
            const typeCounts = {
              champion: 0,
              collaborative: 0,
              defensive: 0,
              avoider: 0,
              shifter: 0
            };

            finalAnswers.forEach(answer => {
              typeCounts[answer.type]++;
            });

            const maxCount = Math.max(...Object.values(typeCounts));
            const tiedTypes = Object.keys(typeCounts).filter(key => typeCounts[key] === maxCount);
            
            const priorityOrder = ['champion', 'collaborative', 'defensive', 'avoider', 'shifter'];
            let resultType = 'champion';
            
            for (const type of priorityOrder) {
              if (tiedTypes.includes(type)) {
                resultType = type;
                break;
              }
            }

            setIsSubmitting(true);

            try {
              await fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  type: resultType,
                  timestamp: new Date().toISOString()
                })
              });
              
              console.log('Result saved to Google Sheets');
            } catch (error) {
              console.error('Error saving to Google Sheets:', error);
            } finally {
              setIsSubmitting(false);
            }
          };

          const startQuiz = () => {
            if (userName.trim()) {
              setShowNameInput(false);
            }
          };

          const resultType = showResult ? calculateResult() : null;
          const result = resultType ? accountabilityTypes[resultType] : null;

          if (showNameInput) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full">
                  <div className="text-center mb-6">
                    <div className="text-5xl mb-4">üèÜ</div>
                    <h1 className="text-3xl font-bold text-gray-800 mb-2">
                      Accountability Styles Quiz
                    </h1>
                    <p className="text-gray-600">
                      Discover your accountability style
                    </p>
                  </div>
                  
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        Enter your name to begin:
                      </label>
                      <input
                        type="text"
                        value={userName}
                        onChange={(e) => setUserName(e.target.value)}
                        onKeyPress={(e) => e.key === 'Enter' && startQuiz()}
                        placeholder="Your name (just for you to see)"
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                      />
                      <p className="text-xs text-gray-500 mt-2">
                        Your name is only shown to you - results are saved anonymously
                      </p>
                    </div>
                    
                    <button
                      onClick={startQuiz}
                      disabled={!userName.trim()}
                      className="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed"
                    >
                      Start Quiz ‚Üí
                    </button>
                  </div>

                  <div className="mt-6 pt-6 border-t border-gray-200">
                    <p className="text-sm text-gray-500 text-center">
                      10 questions ‚Ä¢ 3 minutes ‚Ä¢ Anonymous results
                    </p>
                  </div>
                </div>
              </div>
            );
          }

          if (showResult && result) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full">
                  <div className="text-center mb-8">
                    <div className="text-6xl mb-4">{result.icon}</div>
                    <h2 className="text-3xl font-bold text-gray-800 mb-2">
                      {userName}, you are:
                    </h2>
                    <h3 className="text-2xl font-semibold text-indigo-600 mb-4">
                      {result.title}
                    </h3>
                    <p className="text-gray-700 text-lg leading-relaxed">
                      {result.description}
                    </p>
                  </div>

                  <div className={`${result.color} bg-opacity-10 border-l-4 ${result.color.replace('bg-', 'border-')} p-6 rounded-r-lg mb-6`}>
                    <h4 className="font-semibold text-gray-800 mb-2">What this means:</h4>
                    <p className="text-gray-700">
                      Your accountability style shapes how you respond to challenges and mistakes. 
                      Understanding your natural tendencies can help you grow and work more effectively with others.
                    </p>
                  </div>

                  <div className="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-r-lg mb-6">
                    <h4 className="font-semibold text-blue-900 mb-2 flex items-center gap-2">
                      <span>üí°</span> Growth Opportunities:
                    </h4>
                    <p className="text-blue-800 text-sm leading-relaxed">
                      {result.growth}
                    </p>
                  </div>

                  {isSubmitting && (
                    <div className="bg-purple-50 rounded-lg p-4 mb-6 text-center">
                      <p className="text-sm text-purple-700">Saving your anonymous result...</p>
                    </div>
                  )}

                  <div className="bg-gray-50 rounded-lg p-6 mb-6">
                    <h4 className="font-semibold text-gray-800 mb-3">
                      üîí Privacy Note
                    </h4>
                    <p className="text-sm text-gray-600">
                      Your result has been saved anonymously. Only your accountability type (not your name) is recorded. 
                      Aggregate statistics will be shown to the group.
                    </p>
                  </div>

                  <div className="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
                    <p className="text-sm text-amber-800 text-center">
                      <strong>Remember:</strong> Every accountability style has strengths and areas for growth. 
                      No type is "better" than another - we all have opportunities to improve!
                    </p>
                  </div>

                  <button
                    onClick={() => window.location.reload()}
                    className="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition"
                  >
                    Done
                  </button>
                </div>
              </div>
            );
          }

          return (
            <div className="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center p-4">
              <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-3xl w-full">
                <div className="mb-8">
                  <div className="flex justify-between items-center mb-4">
                    <span className="text-sm font-medium text-indigo-600">
                      Question {currentQuestion + 1} of {questions.length}
                    </span>
                    <span className="text-sm text-gray-500">
                      {userName}
                    </span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div
                      className="bg-indigo-600 h-2 rounded-full transition-all duration-300"
                      style={{ width: `${((currentQuestion + 1) / questions.length) * 100}%` }}
                    ></div>
                  </div>
                </div>

                <h2 className="text-2xl font-bold text-gray-800 mb-6">
                  {questions[currentQuestion].q}
                </h2>

                <div className="space-y-3">
                  {questions[currentQuestion].options.map((option, index) => (
                    <button
                      key={index}
                      onClick={() => handleAnswer(option)}
                      className="w-full text-left p-4 rounded-lg border-2 border-gray-200 hover:border-indigo-500 hover:bg-indigo-50 transition-all duration-200 group"
                    >
                      <div className="flex items-start gap-3">
                        <span className="flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 group-hover:bg-indigo-100 flex items-center justify-center font-semibold text-gray-600 group-hover:text-indigo-600">
                          {String.fromCharCode(65 + index)}
                        </span>
                        <span className="text-gray-700 group-hover:text-gray-900">
                          {option.text}
                        </span>
                      </div>
                    </button>
                  ))}
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AccountabilityQuiz />);
    </script>
</body>
</html>
